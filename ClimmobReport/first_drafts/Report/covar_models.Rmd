
```{r,warning=FALSE,message=FALSE,echo=FALSE}

f1<-as.formula(paste("G~",covar))



R_overall <- to_rankings(dt.fr,
                 items = vars,
                 rankings = overall,
                 type = "tricot")
dt.fr$G<-grouped_rankings(R_overall, index = seq_len(nrow(R_overall)))


tree1 <- pltree(f1,
               data = dt.fr, minsize = 50, alpha = 0.05)



```

```{r}
plot(tree1)
```



```{r}

pval <- function(node) {
  p <- info_node(node)
  if(is.list(p)) p else NULL
}

p<-nodeapply(tree1,1,function(n) info_node(n)$p.value)

print("p-value for initial split of",i,"=",p)
```

```{r}
plot(p1)
```
